# 🧋 奶茶点单小程序 UI/UX 规范（原生小程序 + TDesign）

**版本**：v1.0.0-RC
**适配模式**：默认 / 适老化
**组件库**：TDesign 小程序版 1.x
**目标**：生成可落地的文字版 Figma，用于研发对齐与还原验收。

---

## 1. Design Tokens（设计基座）

### 1.1 颜色（Brand / Semantic）

> 主色为“稍低饱和度蓝”，支持明暗双主题；具体 HEX 可后续由视觉微调，这里提供建议值（可替换）。

| Token           | Light     | Dark      | 用途           |
| --------------- | --------- | --------- | ------------ |
| `--brand-500`   | `#3D6DF2` | `#6F8BFF` | 主色（按钮、激活、选中） |
| `--brand-600`   | `#2C5DE5` | `#88A0FF` | 悬停/按压        |
| `--text-strong` | `#1F2329` | `#F5F6F7` | 标题文本         |
| `--text`        | `#2E3137` | `#E6E8EB` | 正文文本         |
| `--text-weak`   | `#8A8F98` | `#AEB5BD` | 次要说明         |
| `--bg-page`     | `#FAFAFC` | `#0F1114` | 页面底色         |
| `--bg-card`     | `#FFFFFF` | `#15171B` | 卡片底色         |
| `--line`        | `#EBEDF0` | `#272A30` | 分割线/描边       |
| `--success`     | `#20B37E` | `#35C293` | 成功/可用        |
| `--warning`     | `#FFB020` | `#FFC555` | 警示           |
| `--danger`      | `#E0343A` | `#F05A67` | 错误           |

> Dark 模式文本对比度≥4.5:1；背景不使用纯黑，选用近黑以保留层级。

### 1.2 圆角 & 阴影

* **统一圆角**：`12px`（按钮/卡片/弹层）
* 阴影（Light）：`0 6px 16px rgba(0,0,0,0.06)`；Dark：`0 6px 16px rgba(0,0,0,0.35)`

### 1.3 字体 & 字号（遵循微信官方）

* 字体：苹方 / 思源黑体 / 系统默认
* 字号参照微信规范（px）：

  * **Headline** 22（页标题/大区标题）
  * **Title** 17（列表标题、气泡）
  * **Body/Text** 17（正文/弹窗正文）
  * **EmGroupTitle** 15（分组标题）
  * **Desc** 14（二级描述）
  * **Footnote** 12（时间/标签附注）
* 行高：1.4–1.6 之间按场景选用

### 1.4 栅格与间距（遵循微信官方）

* 基线：8pt 栅格（推荐使用 `16rpx` 的倍数）
* 常用：`xs=16rpx`、`sm=24rpx`、`md=32rpx`、`lg=48rpx`、`xl=64rpx`

### 1.5 图标

* 首选 **TDesign Icon**（线性风格），参考 TDesign 图标库。
* 项目已准备占位图标指南：`miniprogram/images/ICON_GUIDE.md`

---

## 2. 通用交互规范

* 点击热区 ≥ **44×44**（rpx/物理像素等效）
* 状态：默认 / 悬停（H5预留）/ 按压（深色 10% 覆盖）/ 禁用（文本 50% 透明度 + 卡片 60% 灰）
* **Toast**：使用 TDesign t-toast，成功 1.5s、失败 2.0s
* **Dialog**：使用 TDesign t-dialog，用于"超出配送范围 / 库存不足 / 价格变化二次确认"
* **骨架屏**：使用 TDesign t-skeleton，列表与规格弹层均展示骨架（图片方块 + 两行文）
* **震动**：**关闭**（不启用轻微震动）
* 无障碍：关键控件提供 `aria-label`（同义属性），文本对比度达标

---

## 3. 页面与组件（文字版线框）

### 3.1 菜单页（主流程页）

**顶部导航**：

* 使用自定义导航栏组件 `navigation-bar`
* 左：返回按钮（使用 TDesign icon）
* 中：页面标题或搜索框
* 右：功能图标区（可选）

**搜索**：

* 使用 TDesign t-search 组件
* 实时搜索（输入即触发，300ms 防抖）
* 提供清空按钮（x）与取消

**主体布局**：

* 左侧分类（Sidebar，固定宽 ≈ 200rpx），右侧商品流（联动滚动）
* 分类项选中高亮，未读小圆点可选

**商品卡（Card/List）**：

* 使用自定义组件 `product-card`
* 形式：**卡片式**（图片 1:1，右侧文案）
* 结构：缩略图 / 标题（17）/ 描述（14）/ 价格（17）/ 右侧 `+` 加购按钮
* 角标：使用 TDesign t-tag（热卖/新品）
* 售罄：整卡置灰 + 角标"售罄"，`+` 禁用
* 价格：默认只显示现价（无划线原价）

**底部吸附栏**：

* 左：购物车入口（使用 TDesign t-badge 显示数量徽标）
* 右：按钮 `去结算`（使用 TDesign t-button）

> 组件映射：`navigation-bar`（自定义）、`t-search`、`t-sidebar`、`product-card`（自定义）、`t-image`、`t-tag`、`t-button`、`t-badge`。

---

### 3.2 规格弹层（由 `+` 触发 Popup）

* 容器：使用 TDesign **t-popup**，底部弹出，高度约 70–80% 屏幕
* 顶部展示商品名 + 价格区域渐进更新
* 规格顺序：**（杯型参与计价但默认隐藏 UI） → 甜度 → 冰块（热饮隐藏） → 加料 → 数量**
* 交互：

  * 选项使用 TDesign `t-radio` / `t-radio-group`（单选）
  * 加料：**最多 2 种，各 1 份**（使用 `t-checkbox` / `t-checkbox-group` + 限制逻辑）
  * 右侧附 `+¥x` 单价增量
  * 底部显示 **实时合计**（基础价 + 加料差价）
  * 关闭：点击遮罩或右上角 `X`；**已选状态保留**
* 数量：使用 TDesign `t-stepper`
* 操作区：`加入购物车`（次按钮）/ `立即购买`（主按钮）

> 组件映射：`t-popup`、`t-cell`、`t-radio`、`t-checkbox`、`t-stepper`、`t-divider`、`t-button`、`t-toast`。

---

### 3.3 结算页（自提 / 外送）

* 顶部：使用 TDesign **t-tabs**，`自提` / `外送`（切换触发重算）
* 自提卡片：预计时间（来自 `eta.text`，若缺失显示配置兜底文案）
* 外送卡片：

  * 地址模块：使用 `wx.chooseLocation` 地图选点（手动输入兜底）
  * 必填 **收货人 / 手机号 / 详细地址**（使用 TDesign `t-input` / `t-cell`）
  * 不展示"免运费横幅"（业务设定为免运）
* 优惠券面板：分组显示 **可用/不可用**，不可用显示原因；排序按 **即将过期优先**
  * 使用 TDesign `t-coupon` 组件（或自定义）
* 集点区域：**不在此页兑换**；仅提示"下单后可累计 X 杯"（进度在"我的"页展示）
* 结算信息：商品明细 + 优惠券抵扣 + 应付总额（免运不展示运费项）
* 底部按钮：`提交订单`（使用 TDesign `t-button`）

> 组件映射：`t-tabs`、`t-cell`、`t-input`、`t-dialog`、`t-coupon`、`t-button`。

---

### 3.4 订单详情

* 头部：使用 TDesign **t-steps** 组件显示状态步进（未支付 / 制作中 / 待取 / 配送中 / 已完成）
* 核心：

  * **自提**：大号取餐码 `A102`（22/28px 等级）
  * **外送**：`预计送达 · eta.text`
* 明细：商品列表 / 金额清单 / 备注 / 地址（外送）
  * 使用 TDesign `t-cell` / `t-cell-group` 展示
* 底部：`联系商家`（使用 `wx.makePhoneCall` 拨号，号源来自 `/config.contact.phone`）

---

### 3.5 我的（个人中心）

* 集点卡：**当前 X/10**，进度条（10 连杯图标）
* 订单入口：我的订单（近 3 月）
* 隐私与关于：隐私政策链接（来自 `/config.legal.privacy_url`）

---

## 4. 关键文案（Copy）

* 搜索占位：**“搜饮品/口味/配料”**
* ETA 兜底：**“前方排队制作中，预计等待时间请留意通知”**（/config 下发）
* 售罄：**“已售罄”**
* 超距：**“亲，这里太远啦（超过10km），建议到店自取哦~”**
* 加料上限：**“最多选择 2 种加料，每种 1 份”**
* 加购成功：**“已加入购物车”**（无震动）
* 空态（统一）：

  * 购物车空：**“肚子在叫？来一杯吧～”**
  * 订单空：**“还没有订单，点一杯试试”**

---

## 5. 组件规格（还原校验）

* 按钮：主按钮使用 `--brand-500` 背景，按压 `--brand-600`；圆角 12px
* 标签 Tag：填充浅底 + 主色文字；售罄为灰底灰字
* 搜索框：圆角 12px，左右内边距 `md=32rpx`
* 卡片：圆角 12px，内边距 `md=32rpx`，图 1:1，图右边距 `md`
* 弹层：圆角顶部 12px，内边距 `lg=48rpx`，底部按钮区安全区适配（iPhone X 系列）

---

## 6. 状态与空/占位策略

* 图片懒加载 + 失败占位（统一插画）
* Skeleton：商品列表（图 + 两行）、弹层（标题 + 2 组选项 + 底部价）
* 禁用：库存不足/售罄/不可用券 → 按钮禁用 + 提示原因

---

## 7. 动效（Motion）

* 页面进出：`200ms` 渐隐/位移
* 弹层：`240ms` 自底上推 + 轻微回弹（减速曲线）
* 点击态：`80–120ms` 颜色/阴影反馈

---

## 8. 可访问性（A11y）

* 文本对比度≥4.5:1；暗色模式下注意蓝色在深背景上的可读性
* 控件均提供可读 label；表单字段具备占位与错误提示

---

## 9. 研发对齐（TDesign 组件映射）

* **常用组件**：`t-button`、`t-cell`、`t-image`、`t-icon`、`t-tag`、`t-badge`
* **表单组件**：`t-input`、`t-radio`、`t-checkbox`、`t-stepper`、`t-search`
* **展示组件**：`t-tabs`、`t-popup`、`t-dialog`、`t-toast`、`t-steps`、`t-skeleton`、`t-empty`、`t-divider`
* **导航组件**：`navigation-bar`（自定义）、`custom-tab-bar`（自定义）
* **业务组件**：`product-card`（自定义）
* 主题变量配置：支持默认主题 / 适老化主题切换（通过 `miniprogram/styles/tokens.json`）

---

> 备注：本规范与《PRD.md》《00-roadmap.md》联动；如需求变更，需同步更新此文档的 tokens/组件映射/文案。
